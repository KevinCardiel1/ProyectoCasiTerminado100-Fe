{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Agregar Detalle de Pedido - Administración</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <style>
        body { background: linear-gradient(180deg, #fff0fb 0%, #ffe6f6 100%) !important; color: #2b0030; }
        .admin-card { background: #fff0fa !important; }
        form select, form input { background:#fff; border:2px solid #c51a8d; padding:8px; border-radius:6px; width:100%; box-sizing:border-box; }
        .buttons{ display:flex; gap:12px; margin-top:12px; align-items:center; }
        a{ color:#5a005a; }
    </style>
    <style>
        body { background: #faf7fb; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .container { max-width: 600px; margin: 40px auto; padding: 30px; background: white; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); }
        h1 { color: #ff66cc; margin-bottom: 25px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        select, input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; transition: 0.3s; }
        select:focus, input:focus { outline: none; border-color: #ff66cc; box-shadow: 0 0 8px rgba(255, 102, 204, 0.3); }
        .btn { width: 100%; padding: 12px; margin-top: 10px; background: #ff66cc; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.3s; }
        .btn:hover { background: #c51a8d; }
        .back-link { display: inline-block; margin-bottom: 20px; padding: 10px 20px; background: #999; color: white; text-decoration: none; border-radius: 6px; }
        .back-link:hover { background: #666; }
    </style>
</head>
<body class="content-with-footer">
    <div class="container">
        <a href="{% url 'ver_detalles_pedidos' %}" class="back-link">← Volver a Detalles</a>
        <h1>Agregar Nuevo Detalle de Pedido</h1>
        
        {% if messages %}
            {% for message in messages %}
                <div style="padding: 15px; margin-bottom: 15px; border-radius: 6px; background: {% if 'error' in message.tags %}#ffcccc{% else %}#ccffcc{% endif %}; color: #333;">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        
        <form method="POST">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="pedido">Pedido *</label>
                <select id="pedido" name="pedido" required>
                    <option value="">Selecciona un pedido</option>
                    {% for pedido in pedidos %}
                        <option value="{{ pedido.id }}">Pedido #{{ pedido.id }} - Cliente: {{ pedido.usuario.nombre }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="usuario">Cliente *</label>
                <select id="usuario" name="usuario" required>
                    <option value="">Selecciona un cliente</option>
                    {% for usuario in usuarios %}
                        <option value="{{ usuario.id }}">{{ usuario.nombre }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="producto">Producto *</label>
                <select id="producto" name="producto" required>
                    <option value="">Selecciona un producto</option>
                    {% for producto in productos %}
                        <option value="{{ producto.id }}">{{ producto.nombre_producto }} - ${{ producto.precio }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="cantidad">Cantidad *</label>
                <input type="number" id="cantidad" name="cantidad_producto" min="1" required>
            </div>
            
            <div class="form-group">
                <label for="precio">Precio Unitario ($) *</label>
                <input type="number" id="precio" name="precio" min="0" step="0.01" required>
            </div>
            
            <div class="form-group">
                <label for="total">Total ($) *</label>
                <input type="number" id="total" name="total" min="0" step="0.01" required>
            </div>
            
            <button type="submit" class="btn">Crear Detalle</button>
        </form>
    </div>
    {% include "footer.html" %}
</body>
</html>
