{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Artistas - AXOLOTL MUSIC</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <style>
        body { background: #faf7fb; color: #2b0030; }
        .artists-container { max-width: 900px; margin: 22px auto; padding: 12px; }
        .artists-header { text-align: center; margin: 8px 0 18px; }
        .artists-header h2 { color: #ff66cc; font-size: 36px; margin: 6px 0; }
        .search-wrap { display:flex; align-items:center; gap:8px; justify-content:center; margin-bottom: 18px; }
        .search-input { width: 360px; max-width: 90%; padding: 10px 14px 10px 36px; border-radius: 22px; border: 2px solid #ff66cc; background: #fff; color: #2b0030; font-size: 16px; box-sizing: border-box; }
        .alphabet-nav { display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:center; margin-bottom: 10px; }
        .alphabet-nav a { text-decoration:none; color:#ff66cc; font-weight:700; cursor: pointer; }
        .alphabet-nav a:hover { color: #c51a8d; }
        .letter-line { border-top: 2px solid #ff66cc; margin: 8px 0 12px; }
        .artist-list { display:flex; flex-direction:column; gap:8px; }
        .artist-section { margin-bottom: 18px; }
        .artist-section h3 { margin: 0 0 6px 6px; font-size: 20px; color: #ff66cc; }
        .artist-chip { display:inline-block; padding:8px 14px; background:#c51a8d; color:#fff; border-radius:20px; text-decoration:none; font-weight:700; margin:6px 8px 6px 6px; transition: 0.3s; }
        .artist-chip:hover { background: #9d0e60; filter: brightness(0.9); }
        .artist-chip.coming { background:#8e8e8e; color:#fff; font-style:italic; }
        @media (max-width:600px){ .search-input{ width: 260px; max-width: 90%; } }
    </style>
</head>
<body style="display:flex;flex-direction:column;min-height:100vh;">
    {% include "navbar.html" %}

    <main style="flex:1;">
        <section class="artists-container">
            <div class="artists-header">
                <h2>Artistas</h2>
            </div>

            <div class="search-wrap">
                <span class="search-icon">üîç</span>
                <input id="artist-search" class="search-input" type="search" placeholder="Buscar artista...">
            </div>

            <div class="alphabet-nav" id="alphabet-nav">
                {% for letra, artistas_list in artistas_por_letra.items %}
                    {% if artistas_list %}
                        <a href="#{{ letra }}" onclick="document.getElementById('{{ letra }}').scrollIntoView({behavior:'smooth'}); return false;">{{ letra }}</a>
                    {% else %}
                        <span style="color:#ccc;">{{ letra }}</span>
                    {% endif %}
                {% endfor %}
            </div>

            <div class="artist-list">
                {% for letra, artistas_list in artistas_por_letra.items %}
                <div class="artist-section" id="{{ letra }}">
                    <h3>{{ letra }}</h3>
                    <div class="letter-line"></div>
                    {% if artistas_list %}
                        {% for artista in artistas_list %}
                            <a class="artist-chip" href="{% url 'comprar_frontend' %}?artista={{ artista.nombre_artista|urlencode }}">{{ artista.nombre_artista }}</a>
                        {% endfor %}
                    {% else %}
                        <span class="artist-chip coming">Pr√≥ximamente</span>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </section>
    </main>

    <script>
    (function(){
        const input = document.getElementById('artist-search');
        const artistSections = Array.from(document.querySelectorAll('.artist-section'));

        input.addEventListener('input', function(){
            const q = input.value.trim().toLowerCase();
            
            artistSections.forEach(section => {
                const chips = Array.from(section.querySelectorAll('.artist-chip'));
                let anyChipVisible = false;
                chips.forEach(c => {
                    const name = c.textContent.trim().toLowerCase();
                    if (name.includes(q)) {
                        c.style.display = 'inline-block';
                        anyChipVisible = true;
                    } else {
                        c.style.display = 'none';
                    }
                });
                section.style.display = anyChipVisible ? 'block' : 'none';
            });
        });
    })();
    </script>

    {% include "footer.html" %}
</body>
</html>